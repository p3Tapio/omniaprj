(this["webpackJsonpreact-omnia"]=this["webpackJsonpreact-omnia"]||[]).push([[0],{37:function(e,t,a){e.exports=a(64)},64:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(34),o=a.n(s),i=(a(24),a(8)),r=a(9);var c=function(){return l.a.createElement("div",{className:"container"},"Welcome to the Home Page!")},d=a(10),m=a(18),u=a(11),p=a(12),h=a(14),b=a(13),E=a(5),g=a(15),v=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null},k=function(){return sessionStorage.getItem("token")||null},f=a(16),y=a.n(f),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={laput:[],noteToEdit:[]},a.deleteFunktio=a.deleteFunktio.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getNotes()}},{key:"deleteFunktio",value:function(e){y.a.post("/proj_api/notes.php",{req:"delete",noteid:e}).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}))}},{key:"getNotes",value:function(){var e=this,t=v();y.a.post("/proj_api/notes.php",{req:"getnotes",userid:t.userId}).then((function(t){var a=t.data;e.setState({laput:a})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=v(),a={margin:"5px"},n={year:"numeric",month:"numeric",day:"numeric"};return l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,"Moi ",t.username,"!"),l.a.createElement("hr",null),l.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-toggle":"modal","data-target":"#lisaaModal",style:a},"Lis\xe4\xe4 uusi"),l.a.createElement(w,null),l.a.createElement("button",{type:"button",className:"btn btn-outline-info","data-toggle":"modal","data-target":"#helpModal"},"Helppi"),l.a.createElement(O,null),l.a.createElement("hr",null),l.a.createElement("div",{className:"container row"},this.state.laput.map((function(t){return l.a.createElement("div",{className:"card bg-light mb-3",style:{maxWidth:"20rem",margin:"5px"},key:t.noteid},l.a.createElement("div",{className:"card-header"},new Date(t.luotu).toLocaleDateString("fi-FI",n)),l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{className:"card-title"},t.otsikko),l.a.createElement("p",{className:"card-text"},t.teksti),l.a.createElement("hr",null),l.a.createElement("button",{style:a,className:"btn btn-outline-warning btn-sm",id:"poista",onClick:function(){return e.setState({noteToEdit:t})},"data-toggle":"modal","data-target":"#poistaModal"},"Poista"),l.a.createElement("button",{style:a,className:"btn btn-outline-success btn-sm",id:"muokkaa",onClick:function(){return e.setState({noteToEdit:t})},"data-toggle":"modal","data-target":"#muokkaaModal"},"Muokkaa"),l.a.createElement(j,{noteToEdit:e.state.noteToEdit}),l.a.createElement(C,{noteToEdit:e.state.noteToEdit,deleteFunktio:e.deleteFunktio})))}))))}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={noteToEdit:[],otsikko:"",teksti:""},a.handleInputChange=a.handleInputChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleClickTallenna",value:function(e){e.preventDefault();var t=this.state.otsikko,a=this.state.teksti;""===t&&(t=this.props.noteToEdit.otsikko),""===a&&(a=this.props.noteToEdit.teksti),this.saveEdit(t,a)}},{key:"saveEdit",value:function(e,t){var a=JSON.stringify({req:"edit",noteid:this.props.noteToEdit.noteid,otsikko:e,teksti:t});fetch("/proj_api/notes.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){e&&window.location.reload()}))}},{key:"handleInputChange",value:function(e){this.setState(Object(m.a)({},this.state,Object(d.a)({},e.target.id,e.target.value)))}},{key:"render",value:function(){var e={border:"1px solid LightGray",padding:"3px",borderRadius:"5px",outline:"none",margin:"5px"};return l.a.createElement("div",{className:"modal fade",id:"muokkaaModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Muokkaa muistilappua"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("form",{onSubmit:this.handleClickTallenna.bind(this)},l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",className:"form-control-plaintext",id:"otsikko",onChange:this.handleInputChange,defaultValue:this.props.noteToEdit.otsikko,style:e}),l.a.createElement("textarea",{className:"form-control",id:"teksti",rows:"5",onChange:this.handleInputChange,style:e,defaultValue:this.props.noteToEdit.teksti}))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"reset",className:"btn btn-outline-warning btn-lg",onClick:function(){return window.location.reload()}},"Poistu"),l.a.createElement("button",{type:"submit",className:"btn btn-outline-success btn-lg"},"Tallenna"))))))}}]),t}(l.a.Component),C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleClickDelete",value:function(){this.props.deleteFunktio(this.props.noteToEdit.noteid)}},{key:"render",value:function(){return l.a.createElement("div",{className:"modal fade",id:"poistaModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Poista"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",null,'Haluatko poistaa muistiinpanon "',this.props.noteToEdit.otsikko,'"?')),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{onClick:this.handleClickDelete.bind(this),type:"button",className:"btn btn-outline-warning","data-dismiss":"modal"},"Poista"),l.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-dismiss":"modal"},"Peruuta")))))}}]),t}(l.a.Component),w=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(h.a)(this,Object(b.a)(t).call(this,e));var n=v();return a.state={otsikko:"",teksti:"",userId:n.userId},a.handleInputChange=a.handleInputChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(m.a)({},this.state,Object(d.a)({},e.target.id,e.target.value)))}},{key:"handleSubmit",value:function(e){if(""===this.state.teksti||""===this.state.otsikko)e.preventDefault(),alert("Anna muistiinpanoillesi sis\xe4lt\xf6 ja otsikko!");else{e.preventDefault();var t=JSON.stringify({req:"addnote",userid:parseInt(this.state.userId),otsikko:this.state.otsikko,teksti:this.state.teksti});console.log(t),fetch("/proj_api/notes.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:t}).then((function(e){window.location.reload()})).catch((function(t){e.preventDefault(),console.log(t)}))}}},{key:"handlePoistu",value:function(){document.getElementById("teksti").value="",document.getElementById("otsikko").value=""}},{key:"render",value:function(){var e={border:"1px solid LightGray",padding:"3px",borderRadius:"5px",outline:"none",margin:"5px"};return l.a.createElement("div",{className:"modal fade",id:"lisaaModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Lis\xe4\xe4 uusi muistilappu"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("form",null,l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",className:"form-control-plaintext",id:"otsikko",onChange:this.handleInputChange,placeholder:"Anna otsikko",style:e}),l.a.createElement("textarea",{className:"form-control",id:"teksti",onChange:this.handleInputChange,rows:"5",style:e,placeholder:"Kirjoita t\xe4h\xe4n muistiinpanosi"}))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"reset",className:"btn btn-outline-warning btn-lg","data-dismiss":"modal",onClick:this.handlePoistu.bind(this)},"Poistu"),l.a.createElement("button",{type:"submit",className:"btn btn-outline-success btn-lg",onClick:this.handleSubmit.bind(this)},"Tallenna"))))))}}]),t}(l.a.Component);function O(){return l.a.createElement("div",{className:"modal fade",id:"helpModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Help"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",null,"Voit lis\xe4t\xe4 uuden muistilapun klikkaamalla lis\xe4\xe4 uusi -n\xe4pp\xe4int\xe4."),l.a.createElement("p",null,"Tallentamiasi muistilappuja voi muokata klikkaamalla muokkaa-teksti\xe4 ja muistilapun voi poistaa kohdasta poista")),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Sulje")))))}var x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={username:"",password:"",passwordcheck:"",email:"",render:"login"},a.handleClickVaihda=a.handleClickVaihda.bind(Object(E.a)(a)),a.handleChangeInput=a.handleChangeInput.bind(Object(E.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleClickVaihda",value:function(e){"tunnus"===e.target.id?this.setState({render:"register"}):"kirjaudu"===e.target.id&&this.setState({render:"login"})}},{key:"handleChangeInput",value:function(e){this.setState(Object(m.a)({},this.state,Object(d.a)({},e.target.id,e.target.value)))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),"login"===this.state.render?""===this.state.username||""===this.state.password?alert("Anna k\xe4ytt\xe4j\xe4tunnus ja salasana"):y.a.post("/proj_api/users.php",{req:this.state.render,username:this.state.username,password:this.state.password}).then((function(e){var a,n;alert("Tervetuloa "+e.data.user.username+"!"),a=e.data.token,n=e.data.user,sessionStorage.setItem("token",a),sessionStorage.setItem("user",JSON.stringify(n)),t.props.history.push("/omatsivut"),window.location.reload()})).catch((function(e){e.response&&alert(e.response.data.message)})):"register"===this.state.render&&(this.state.password!==this.state.passwordcheck?(alert("Salasanat ei t\xe4sm\xe4\xe4"),e.preventDefault()):""===this.state.password||""===this.state.username?(alert("Anna salasana ja k\xe4ytt\xe4j\xe4tunnus, jotta voit kirjautua.\nSpostilla nyt ei niin v\xe4li\xe4."),e.preventDefault()):y.a.post("/proj_api/users.php",{req:this.state.render,username:this.state.username,password:this.state.password,email:this.state.email}).then((function(e){alert("Tervetuloa!\n "+e.data.message+"!\n Voit nyt kirjautua sivulle."),window.location.reload()})).catch((function(e){e.response&&alert(e.response.data.message)})))}},{key:"render",value:function(){var e={margin:"4px",width:"240px",display:"flex",alignItems:"center"};return"login"===this.state.render?l.a.createElement("div",{className:"container d-flex justify-content-center",style:{marginTop:"30px"}},l.a.createElement("div",{className:"jumbotron",style:{maxWidth:"350px"}},l.a.createElement("h3",{className:"mb-4"},"Kirjautuminen"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:""},l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"text",className:"form-control",id:"username",placeholder:"K\xe4ytt\xe4j\xe4tunnus"}),l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"password",className:"form-control",id:"password",placeholder:"Salasana"}),l.a.createElement("button",{type:"submit",className:"btn btn-outline-success",style:e},"Kirjaudu"),l.a.createElement("small",{style:{color:"brown",cursor:"pointer",marginLeft:"8px"},onClick:this.handleClickVaihda,id:"tunnus"},"Luo k\xe4ytt\xe4j\xe4tunnus")))))):"register"===this.state.render?l.a.createElement("div",{className:"container d-flex justify-content-center",style:{marginTop:"30px"}},l.a.createElement("div",{className:"jumbotron",style:{maxWidth:"350px"}},l.a.createElement("h3",{className:"mb-4"},"Luo k\xe4ytt\xe4j\xe4tunnus"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:""},l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"text",className:"form-control",id:"username",placeholder:"K\xe4ytt\xe4j\xe4tunnus"}),l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"password",className:"form-control",id:"password",placeholder:"Salasana"}),l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"password",className:"form-control",id:"passwordcheck",placeholder:"Salasana uudestaan"}),l.a.createElement("input",{style:e,onChange:this.handleChangeInput,type:"text",className:"form-control",id:"Email",placeholder:"S\xe4hk\xf6posti"}),l.a.createElement("button",{type:"submit",className:"btn btn-outline-success",style:{margin:"5px",width:"115px"}},"Tallenna"),l.a.createElement("button",{type:"reset",className:"btn btn-outline-warning",style:{marginLeft:"5px",width:"115px"}},"Tyhjenn\xe4"),l.a.createElement("br",null),l.a.createElement("small",{style:{color:"brown",cursor:"pointer",marginLeft:"8px"},onClick:this.handleClickVaihda,id:"kirjaudu"},"Kirjaudu")))))):l.a.createElement("p",null,"Loading....")}}]),t}(n.Component),I=a(19);function S(e){var t=e.component,a=Object(I.a)(e,["component"]);return l.a.createElement(r.b,Object.assign({},a,{render:function(e){return k()?l.a.createElement(t,e):l.a.createElement(r.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function T(e){var t=e.component,a=Object(I.a)(e,["component"]);return l.a.createElement(r.b,Object.assign({},a,{render:function(e){return k()?l.a.createElement(r.a,{to:{pathname:"/omatsivut"}}):l.a.createElement(t,e)}}))}var M=function(){var e="";return null===v()?e=l.a.createElement(i.b,{to:"/login",className:"nav-link"},"Kirjaudu"):null!==v()&&(e=l.a.createElement(i.b,{to:"/",className:"nav-link",onClick:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),window.location.reload()}},"Kirjaudu ulos")),l.a.createElement("div",{className:"App"},l.a.createElement(i.a,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary mb-4"},l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor03"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(i.b,{to:"/",className:"nav-link"},"Etusivu")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(i.b,{to:"/omatsivut",className:"nav-link"},"Omat sivut")),l.a.createElement("li",{className:"nav-item"},e)))),l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:"/",component:c}),l.a.createElement(S,{path:"/omatsivut",component:N}),l.a.createElement(T,{path:"/login",component:x}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.67fa6513.chunk.js.map